<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Zotpicknix by emmareisz</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Zotpicknix</h1>
        <p>Integrating the Zotero Picker in Linux with Scrivener (or another text editor)</p>

        <p class="view"><a href="https://github.com/emmareisz/zotpicknix">View the Project on GitHub <small>emmareisz/zotpicknix</small></a></p>


        <ul>
          <li><a href="https://github.com/emmareisz/zotpicknix/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/emmareisz/zotpicknix/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/emmareisz/zotpicknix">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>About</h2>

<p>This is a guide to using the <a href="https://github.com/emmareisz/zotpicknix">Zotpicknix scripts</a>. These scripts can be used alongside other tools to provide a workflow in Linux for integrating Scrivener and Zotero. The result is <strong>live citations</strong> in either LibreOffice or Markdown/LaTeX.  </p>

<h3>
<a id="is-zotpicknix-right-for-me" class="anchor" href="#is-zotpicknix-right-for-me" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Is zotpicknix right for me?</h3>

<p>The zotpicknix workflow offers access to a Zotero picker from inside Scrivener, and it produces live citations. <a href="https://www.literatureandlatte.com/forum/viewtopic.php?f=33&amp;t=32659&amp;start=0#p205160">Using a floating picker</a> reduces writing distraction and is ideal on smaller monitors.</p>

<blockquote>
<p>An <strong><em>old-school workflow</em></strong> with less set-up is to open Zotero, select your reference, copy it with Ctrl-Shift-A and then paste into Scrivener. The reference will be formatted in whatever style is selected in Zotero Preferences under Export/Default Output Format.<br>
If the default output format is a citation style (e.g. Chicago), the text will be fixed, i.e. your reference will not update if you edit the Zotero record, and you cannot change that reference into a different style.<br>
If the default is set to <strong>Scannable-Cite</strong> markers (RTF/ODT add-on required) or <strong>Pandoc Citation</strong> markers, your references will remain live, and can be turned into citations as described below under 'Processing'.</p>
</blockquote>

<h3>
<a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How it works</h3>

<p>(Don't need the details? Skip to the Installation section.) This Scrivener-Zotero Linux workflow has the following elements:  </p>

<ul>
<li>
<strong>Floating picker</strong> (from the Better BibTeX Zotero add-on): we use this to make Zotero citations easily available while working in Scrivener (or another editor of your choice).<br>
</li>
<li>
<strong>zotpicknix scripts</strong>. We use these to copy citation markers from the Better BibTeX picker into Scrivener.</li>
<li>
<strong><em>either:</em></strong> the <strong>RTF/ODT</strong> Zotero add-on <em>plus</em> the <strong>OO/LO</strong> Zotero add-in. These turn citation markers into live citations in LibreOffice.</li>
<li>
<strong><em>or:</em></strong> <strong>Pandoc</strong> text processor <em>plus</em> the <strong>Better BibTeX</strong> Zotero add-on. These take citation markers in a markup format such as Markdown/LaTeX etc. and produce correctly formatted citations in the output (using a .bib file kept in sync with our Zotero library).</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<ol>
<li>Install the <a href="https://zotplus.github.io/better-bibtex/">Better BibTeX add-on</a> for Zotero. Install it <strong><em>either</em></strong> for Zotero Firefox <strong>or</strong> for Standalone, but <strong>not both</strong>. If you are using Zotero for Firefox, go to Zotero Preferences/Better BibTex/ImportExport and check 'Enable export by HTTP'; restart Firefox.</li>
<li>Confirm Better BibTeX is set up correctly by opening <a href="http://localhost:23119/better-bibtex/cayw?probe=probe">this page</a> while Zotero is running. The word 'ready' should appear in that tab of your browser.</li>
<li>Install <a href="http://www.semicomplete.com/projects/xdotool/">xdotool</a> on Linux (in the package archives of most distributions).<br>
</li>
<li>Scripts for two citation marker formats are available: <strong>Scannable-Cite</strong> and <strong>Pandoc</strong>. If you edit in a word processor after you have finished in Scrivener, or if you aren't sure what you need, pick Scannable-Cite. If you write in a markup format, including Markdown or LaTeX, you will need Pandoc. (Better BibTeX <a href="https://github.com/retorquere/zotero-better-bibtex/wiki/Cite-as-you-Write">also supports</a> .mmd and LaTeX's own marker formats, i.e. without using Pandoc; if you need these, let me know or simply edit the script for your required query URL.)<br>
</li>
</ol>

<h3>
<a id="installation-cont-scannable-cite" class="anchor" href="#installation-cont-scannable-cite" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation cont.: Scannable-Cite</h3>

<ol>
<li>For <strong>Scannable-Cite</strong> markers, <a href="https://github.com/emmareisz/zotpicknix">download</a> the zotpicknix-sc script. Mark the script as executable and save it in your PATH, e.g. in a folder called 'bin' in your Home directory. If you want to create citations in a text editor other than Scrivener, you will need to edit the script (see the README.md).<br>
</li>
<li>Create a system keyboard shortcut to wherever you saved the script. (This is necessary because the built-in citation integration in Scrivener does not call Linux executables correctly.)</li>
<li>Install the <a href="https://zotero-odf-scan.github.io/zotero-odf-scan/">RTF/ODT add-on</a> for Zotero.<br>
</li>
<li>Make sure Zotero's LO/OO add-in is installed (Zotero/Preferences/Cite/Word Processors).<br>
</li>
</ol>

<h3>
<a id="installation-cont-pandoc" class="anchor" href="#installation-cont-pandoc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation cont.: Pandoc</h3>

<ol>
<li>For <strong>Pandoc</strong> markers, <a href="https://github.com/emmareisz/zotpicknix">download</a> the zotpicknix-pd script. Mark the script as executable and save it in your PATH, e.g. in a folder called 'bin' in your Home directory. If you want to create citations in a text editor other than Scrivener, you will need to edit the script (see the README.md).<br>
</li>
<li>Create a system keyboard shortcut to wherever you saved the script. (This is necessary because the built-in citation integration in Scrivener does not call Linux executables correctly.)<br>
</li>
<li>Install <a href="http://pandoc.org/">pandoc</a> (in the package repositories of most Linux distributions).<br>
</li>
<li>In Zotero, go to the library you want to use for citations and right-click; select 'Export/Format: Better BibTeX' and check 'Keep Updated'. Choose a suitable location for your export.<br>
</li>
</ol>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<ol>
<li>Make sure Zotero is running. In Scrivener, place the cursor where you want the reference to go. When it is in the correct location, enter your keyboard shortcut for your script. <strong>Any text you have selected will be overwritten.</strong><br>
</li>
<li>The little Zotero picker window should appear.</li>
<li>In the picker, select the item you want to cite from your library. When you have selected it, double-click on the reference to get more options (page locators, prefix etc.).<br>
</li>
<li>When you have added all the citations you need in that reference, press Enter.<br>
</li>
<li>Some strange-looking text will now appear in Scrivener wherever you left the cursor. This is a citation marker. If you are using Scannable-Cite, it will look like this: <code>{ | Smith, (2012) | | |zu:2433:WQVBH98K}</code> (more information on editing Scannable Cite references is <a href="https://zotero-odf-scan.github.io/zotero-odf-scan/">here</a>). If you are using Pandoc, it will look like this: <code>[@smith_test_2012]</code>.<br>
</li>
<li>Continue writing your text and inserting references until you have finished your work. When you have finished, you will need to process your citations.<br>
</li>
</ol>

<h3>
<a id="processing-citations-scannable-cite" class="anchor" href="#processing-citations-scannable-cite" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Processing Citations: Scannable-Cite</h3>

<ol>
<li>'Compile' your Scrivener document. If you use footnotes in Scrivener, compile for .rtf (Scrivener will not export footnotes to .odt); otherwise compile for .odt.<br>
</li>
<li>If your document is now in .rtf, use LibreOffice or OpenOffice to save it as .odt.<br>
</li>
<li>Open Zotero and select Tools/RTF Scan. Choose 'ODF to citations' and select the .odt document you have just created. Enter a suitable name for the new .odt document you are creating and click Next. For more information, see <a href="https://zotero-odf-scan.github.io/zotero-odf-scan/">here</a>.<br>
</li>
<li>You will now have an .odt document with live citations. You can work with this as normal in LibreOffice/OpenOffice. You can process the citations in the familiar way using the Zotero add-in for LO/OO: select a style, create a bibliography, etc. The citations will stay live as long as the document is in .odt. If you save it as .doc, .rtf etc., the citations will become fixed.<br>
</li>
</ol>

<h3>
<a id="processing-citations-pandoc" class="anchor" href="#processing-citations-pandoc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Processing Citations: Pandoc</h3>

<ol>
<li>'Compile' your Scrivener document/ save your document in your chosen format. Pandoc works best with markup languages like Markdown.<br>
</li>
<li>To process your citations, open the terminal and run the following command:<br>
<code>pandoc --filter pandoc-citeproc --bibliography BIBLIOGRAPHY.bib --csl STYLE.csl -o outputfile inputfile</code><br>
(For BIBLIOGRAPHY.bib, give the file path to the library you exported during installation. For STYLE.csl, give the file path to your chosen csl style file. Set the input and output filenames as needed. For more information, see <a href="http://pandoc.org/README.html">here</a>.) Your citations are now fixed in the output file.<br>
</li>
<li>ALTERNATIVELY, if you are using Markdown/MMD/Pandoc-Markdown/LaTeX and want HTML output, you can process the citations via a GUI by using <a href="https://atom.io/">Atom</a> with <a href="https://atom.io/packages/markdown-preview-plus">Markdown Preview Plus</a>. You can save the html output by right-clicking in the preview window.<br>
</li>
<li>More information on Pandoc/Scrivener workflows is available <a href="https://davepwsmith.github.io/academic-scrivener-howto/">from Dave Smith</a> (written for Mac users).<br>
</li>
</ol>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/emmareisz">emmareisz</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
